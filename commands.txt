
# Conda env
conda create -n donkey python=3.8
conda activate donkey

conda install pytorch=1.11.0 torchvision torchaudio cudatoolkit=11.3 -c pytorch

conda install -c conda-forge gym=0.21.0 seaborn=0.11.2 pyyaml=5.4.1 opencv=4.5.5

pip install gym-donkeycar==0.1.12 stable-baselines3==1.5.0 sb3-contrib==1.5.0 optuna==2.10.0 optuna[stable-baselines3] pyzmq==22.3.0 pygame==2.1.2 imgaug==0.4.0 joblib==1.1.0 tensorboard==2.8.0 protobuf==3.20.0 ipython==7.31.0

(if any import error wrt env comes up copy the gym_donkeycar/gym_donkeycar/* to anaconda3/envs/donkey/lib/python3.8/site-packages/gym_donkeycar/)

cd aae-train-donkeycar and pip install -e .

# Download Simulator
https://github.com/tawnkramer/gym-donkeycar/releases/download/v22.11.06/DonkeySimLinux.zip

then extract and run chmod +x DonkeySimLinux/donkey_sim.x86_64
then run the simulator normally

# Collect Data for auto encoder
python record_data.py -f logs/dataset-mountain -n 10000 

#Train the auto encoder
python -m ae.train_ae --n-epochs 500 --batch-size 8 --z-size 32 -f logs/dataset-mountain/ --verbose 1

#Continue Training Auto encoder
python -m ae.train_ae --n-epochs 500 --batch-size 8 --z-size 32 -f logs/dataset-mountain/ --verbose 1 -ae logs/ae-32_1716979559_best.pkl


# Normal start training
python train.py --algo tqc --env donkey-mountain-track-v0 --eval-freq -1 --save-freq 25000

# Start training - using tensorboard and modifying params
python train.py --algo tqc --env donkey-mountain-track-v0 --eval-freq -1 --save-freq 25000 --save-replay-buffer -tb /tmp/sb3/
 -params learning_starts:500

# Continue training
python train.py --algo tqc --env donkey-mountain-track-v0 -i logs/tqc/donkey-mountain-track-v0_4/rl_model_200000_steps.zip -n
 25000 --eval-freq -1 --save-freq 25000 --save-replay-buffer -tb /tmp/sb3/ -params learning_starts:500

# To access tensorboard
tensorboard --logdir /tmp/sb3/
